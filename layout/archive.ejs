<main class="max-w-3xl mx-auto px-4 pt-32">
    <header class="mb-16 text-center">
        <h1 class="text-4xl font-black uppercase tracking-widest">
            <% if (is_category()) { %>
                <%= page.category %>
            <% } else if (is_tag()) { %>
                #<%= page.tag %>
            <% } else { %>
                归档
            <% } %>
        </h1>
        <p class="text-gray-500 mt-2 font-mono text-sm">
            <% if (is_category()) { %>
                共 <%= site.categories.findOne({name: page.category}).posts.length %> 篇文章
            <% } else if (is_tag()) { %>
                共 <%= site.tags.findOne({name: page.tag}).posts.length %> 篇文章
            <% } else { %>
                共 <%= site.posts.length %> 篇文章
            <% } %>
        </p>
    </header>
    
    <div class="relative border-l-2 border-gray-100 ml-4 md:ml-0 space-y-12">
    <% var lastYear; %>
    <% page.posts.forEach(function(post){ %>
        <% var year = post.date.year(); %>
        <% if (lastYear != year){ %>
            <div class="relative">
                <span class="absolute -left-[9px] top-4 h-4 w-4 bg-black rounded-none"></span>
                <div class="pl-8 text-6xl font-black text-gray-200 select-none"><%= year %></div>
            </div>
            <% lastYear = year; %>
        <% } %>
        
        <div class="relative pl-8 group">
             <!-- Dot -->
             <span class="absolute -left-[5px] top-2 h-2 w-2 bg-gray-300 group-hover:bg-black transition-colors rounded-none"></span>
             
             <div class="flex flex-col md:flex-row md:items-baseline gap-2 md:gap-8">
                <time class="text-sm font-mono text-gray-400"><%= date(post.date, 'MM-DD') %></time>
                <h2 class="text-xl font-bold leading-tight">
                    <a href="<%- url_for(post.path) %>" class="hover:underline decoration-2 decoration-black underline-offset-4 transition-all"><%= post.title %></a>
                </h2>
             </div>
        </div>
    <% }) %>
    </div>

    <!-- Pagination -->
    <div class="flex justify-center mt-20 space-x-4">
        <% if (page.prev) { %>
            <a href="<%- url_for(page.prev_link) %>" class="btn btn-outline rounded-none border-black hover:bg-black hover:text-white uppercase tracking-widest">上一页</a>
        <% } %>
        <% if (page.next) { %>
            <a href="<%- url_for(page.next_link) %>" class="btn btn-outline rounded-none border-black hover:bg-black hover:text-white uppercase tracking-widest">下一页</a>
        <% } %>
    </div>
</main>
